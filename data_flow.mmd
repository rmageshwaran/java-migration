graph LR
    %% IoT Data Processing Flow
    subgraph flow["IoT Data Processing Architecture"]
        C1[IoT Sensors<br/>Temperature, Pressure<br/>Location, Status]
        C2[Data Ingestion Service<br/>Validation & Transformation<br/>Protocol Adapters]
        C3[Apache Kafka<br/>Event Streaming Platform<br/>High Throughput]
        C4[Stream Processing Service<br/>Real-time Analytics<br/>Anomaly Detection]
        C5[Time-Series Database<br/>Historical Data Storage<br/>InfluxDB/TimescaleDB]
        C6[Notification Service<br/>Alerts & Events<br/>Multi-channel Delivery]
        C7[Reporting Service<br/>Dashboards & Analytics<br/>Business Intelligence]
        
        C1 -->|Raw Sensor Data<br/>JSON/Binary| C2
        C2 -->|Validated Events<br/>Structured Data| C3
        C3 -->|Real-time Stream<br/>Event Processing| C4
        C3 -->|Batch Processing<br/>Historical Analysis| C5
        C4 -->|Critical Events<br/>Alert Triggers| C6
        C4 -->|Processed Metrics<br/>Analytics Data| C7
        C5 -->|Historical Queries<br/>Time-series Data| C7
        
        style C1 fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
        style C2 fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
        style C3 fill:#fff3e0,stroke:#f57f17,stroke-width:3px
        style C4 fill:#c8e6c9,stroke:#4caf50,stroke-width:2px
        style C5 fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px
        style C6 fill:#fce4ec,stroke:#e91e63,stroke-width:2px
        style C7 fill:#fff8e1,stroke:#fbc02d,stroke-width:2px
    end
