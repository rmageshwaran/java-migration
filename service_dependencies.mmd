graph TD
    %% Microservices Dependency Graph
    subgraph deps["Service Dependencies & Communication"]
        D1[API Gateway<br/>Entry Point<br/>Load Balancing]
        D2[User Management Service<br/>Authentication & Authorization<br/>Multi-tenant Support]
        D3[Device Management Service<br/>Device Registry<br/>Configuration Management]
        D4[Data Ingestion Service<br/>Protocol Adapters<br/>Data Validation]
        D5[Stream Processing Service<br/>Real-time Analytics<br/>Event Processing]
        D6[Reporting Service<br/>Dashboards & Reports<br/>Data Visualization] 
        D7[Notification Service<br/>Alerts & Messaging<br/>Multi-channel Delivery]
        
        %% Primary dependencies
        D1 --> D2
        D1 --> D3
        D1 --> D4
        D1 --> D6
        
        %% Service-to-service dependencies
        D3 --> D2
        D4 --> D3
        D5 --> D4
        D6 --> D2
        D6 --> D5
        D7 --> D2
        D7 --> D5
        
        %% Styling by layer
        style D1 fill:#2196f3,color:#fff,stroke:#1565c0,stroke-width:3px
        style D2 fill:#ffecb3,stroke:#f57f17,stroke-width:2px
        style D3 fill:#c8e6c9,stroke:#4caf50,stroke-width:2px
        style D4 fill:#e1f5fe,stroke:#2196f3,stroke-width:2px
        style D5 fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px
        style D6 fill:#fff3e0,stroke:#f57f17,stroke-width:2px
        style D7 fill:#fce4ec,stroke:#e91e63,stroke-width:2px
    end
